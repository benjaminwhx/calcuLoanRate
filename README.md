# calcuLoanRate
方便计算贷款的年利率，包括市面上主流的贷款软件以及银行

## 微粒贷
微信推出的借贷功能，日利率0.05%，可以提前还款

## 51人品贷
51信用卡管家自带的贷款功能，它的计算方式比较特别，因为加上了合同金额这个概念, `合同金额 = 原贷款金额+5%的原贷款金额`
```
每期应还 = 合同金额/期数 + 合同金额*月费率
```

## 中信圆梦金
某一天接到中信银行客服打来的电话，说有福利送给我，我以为多么大的福利呢，原来是贷款金不占固额，但是利率很高，月利率7.5%，不要以为年华就是9%了，因为你的本金每个月在减少，而你还是以原始本金计算的利息

为了以后方便计算利息，特地写了个程序来计算。

## 网上找的公式，里面大致和我的思路一样，就是在算【按月手续费率计算分期手续费】的地方没有将每月的本金和利息减去，只减去了本金。
假设：
1.分期金额 = M
2.分期期数 = X
3.月手续费 = y%
4.实际年化利率 = n%

按月手续费率计算的分期手续费(即利息)应该和按实际年化利率计算的相同  
M * y% * X = (M * n%)/12 + [(M - M/X) * n%]/12 + [(M - 2M/X) * n%]/12 + [(M - 3M/X) * n%]/12 + ... + [(M - (X-1)M/X) * n%]/12  
提取等式右边的因子M(分期金额)，约去等式两边的M，将12乘到等式左边  
=> 12 * y% * X = n% * [1 + (1-1/X) + (1-2/X) + (1-3/X) + ... + (1-(X-1)/X)]  
=> 12 * y% * X = n% * [1 + (X-1)/X + (X-2)/X + (X-3)/X + ... + 1/X]  
提取等式右边的因子1/X  
=> 12 * y% * X = (n%/X) + [X + (X-1) + (X-2) + (X-3) + ... + 1]  
等式右边等差数列Sx求和  
=> 12 * y% * X = (n% / X) * {[(1+X)*X]/2}  
=> n% = (12 * y% * X)/[(1+X)/2] = (24 * y% * X)/(1 + X)  
所以实际年化利率 = (24 * 月手续费 * 分期期数) / (1 + 分期期数)  
